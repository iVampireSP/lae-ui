import{r as u,i as v,c as a,b as t,w as r,v as p,t as i,F as m,d as h,l as T,m as C,q as x,bs as f,bp as F,f as P,j as y,n as G,e as s}from"./index.8172a0e3.js";const A=t("h3",null,"\u955C\u7F18\u6620\u5C04",-1),L=t("p",null,"\u955C\u7F18\u6620\u5C04\u53EF\u4EE5\u5E2E\u52A9\u60A8\u6620\u5C04\u60A8\u7684\u5185\u7F51\u670D\u52A1\u5230\u516C\u7F51\u4E2D\u3002",-1),R=t("p",null,[t("a",{href:"https://forum.laecloud.com/d/5-ying-she-ji-chu-jiao-xue-ji-chu-zhong-de-ji-chu-chu-xue-zhe-xian-ding",target:"_blank"},"\u5982\u679C\u60A8\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\uFF0C\u8BF7\u52A1\u5FC5\u770B\u8FD9\u91CC\u3002")],-1),$={class:"list-group mt-3"},q={class:"d-flex w-100 justify-content-between"},I={class:"mb-1 text-success"},J={class:"mb-1"},K={key:0,"data-bs-toggle":"tooltip","data-bs-placement":"right",title:"\u6309\u4F4F Shift \u6216 Ctrl \u6765\u6253\u5F00"},Q=["href"],W=t("i",{class:"bi bi-box-arrow-up-right text-decoration-none"},null,-1),X={key:1},Y={class:"mt-3"},Z={class:"btn-group",role:"group","aria-label":"\u521B\u5EFA\u6216\u6574\u5408\u96A7\u9053\u914D\u7F6E\u6587\u4EF6"},O=y(" \u6574\u5408\u914D\u7F6E "),tt=y(" \u5BA2\u6237\u7AEF\u4E0B\u8F7D "),et={class:"modal fade",id:"createTunnelModel",tabindex:"-1","aria-labelledby":"createTunnelModel","aria-hidden":"true"},ot={class:"modal-dialog"},lt={class:"modal-content"},at=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"\u65B0\u5EFA\u96A7\u9053"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),st={class:"modal-body"},nt={key:0,class:"alert alert-success",role:"alert"},rt={key:1,class:"alert alert-danger",role:"alert"},it={key:2,class:"alert alert-primary",role:"alert"},dt={class:"form-floating mb-3"},ut=t("label",{for:"floatingName"},"\u96A7\u9053\u540D\u79F0",-1),ct={class:"form-floating mb-3"},_t=t("label",{for:"floatingName"},"\u672C\u5730 \u5730\u5740\u548C\u7AEF\u53E3",-1),vt={class:"form-floating mb-3"},pt=t("option",{value:"http"},"HTTP",-1),mt=t("option",{value:"https"},"HTTPS",-1),ht=t("option",{value:"tcp"},"TCP",-1),ft=t("option",{value:"udp"},"UDP",-1),bt=[pt,mt,ht,ft],gt=t("label",{for:"floatingProtocol"},"\u534F\u8BAE",-1),xt={class:"form-floating mb-3"},yt=["value"],kt=t("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 HTTP \u534F\u8BAE\u7684\u8282\u70B9",-1),St={class:"form-floating mb-3"},Tt=["value"],Ct=t("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 HTTPS \u534F\u8BAE\u7684\u8282\u70B9",-1),Pt={class:"form-floating mb-3"},wt=["value"],Vt=t("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 TCP \u534F\u8BAE\u7684\u8282\u70B9(\u56FD\u5185\u670D\u52A1\u5668\u4E25\u7981 TCP \u5EFA\u7AD9)",-1),Ut={class:"form-floating mb-3"},Mt=["value"],Nt=t("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 UDP \u534F\u8BAE\u7684\u8282\u70B9",-1),Dt={class:"form-floating mb-3"},jt=t("label",{for:"floatingDomain"},"\u7ED1\u5B9A\u57DF\u540D",-1),Ht={class:"form-check"},Bt=t("label",{class:"form-check-label",for:"createHttps"}," \u540C\u65F6\u521B\u5EFA HTTP(s) \u96A7\u9053 ",-1),zt={class:"form-floating mb-3"},Et=t("label",{for:"floatingPort"},"\u8FDC\u7A0B\u7AEF\u53E3",-1),Ft={key:0},Gt={key:0,class:"text-danger ms-1"},At={class:"d-none"},Lt=["textContent"],Rt={key:3},$t=t("h3",null,"\u670D\u52A1\u5668\u4FE1\u606F",-1),qt={key:0},It={key:1},Jt=t("p",null,[y(" \u5982\u679C\u60A8\u7EE7\u7EED\uFF0C\u5219\u4EE3\u8868\u540C\u610F\u4E86\u6211\u4EEC\u7684"),t("a",{target:"_blank",href:"https://forum.laecloud.com/d/6-jing-yuan-ying-she-shi-yong-tiao-kuan"},"\u4F7F\u7528\u6761\u6B3E")],-1),Kt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1),Xt={__name:"Index",setup(Qt){const k=u([]),b=u([]),_=u([]),w=u([]),V=u([]),U=u([]),M=u([]),S=u(!1),g=u(!1);u({});const d=u({name:null}),o=u({name:null,protocol:"http",local_address:"127.0.0.1:80",server_id:1,remote_port:null,custom_domain:null,create_https:!0,create_cdn:!1});function N(n){n=n||32;for(var l="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",c=l.length,e="",j=0;j<n;j++)e+=l.charAt(Math.floor(Math.random()*c));return e}o.value.name=N(10),v.get("/modules/frp/hosts").then(n=>{b.value=n.data}),v.get("/modules/frp/traffics").then(n=>{k.value=n.data});function H(){v.get("/modules/frp/servers").then(n=>{S.value=!1,_.value=n.data,o.server_id=_.value[0].id,w.value=_.value.filter(l=>l.allow_http==1),V.value=_.value.filter(l=>l.allow_https==1),U.value=_.value.filter(l=>l.allow_tcp==1),M.value=_.value.filter(l=>l.allow_udp==1)})}function B(){o.value.name=N(10)}function z(n){d.value=_.value.find(l=>l.id==n)}function D(){var e;const n=(e=o.value.remote_port)!=null?e:0,l=d.value.min_port,c=d.value.max_port;(n<l||n>c)&&(o.value.remote_port=Math.floor(Math.random()*(c-l+1)+l))}function E(){v.post("/modules/frp/hosts",o.value).then(n=>{(o.value.protocol=="https"||o.value.protocol=="http")&&(o.value.create_https&&(o.value.protocol=="http"?o.value.protocol="https":o.value.protocol=="https"&&(o.value.protocol="http")),o.value.name+=" - "+o.value.protocol,v.post("/modules/frp/hosts",o.value).then(l=>{v.get("/modules/frp/hosts").then(c=>{b.value=c.data})})),n.status==200||n.status==201?(v.get("/modules/frp/hosts").then(l=>{b.value=l.data}),S.value=!0):g.value=n.message}).catch((n,l)=>{g.value="\u65E0\u6CD5\u521B\u5EFA\u96A7\u9053\uFF0C\u53EF\u80FD\u662F\u8868\u5355\u6CA1\u6709\u586B\u5199\u5B8C\u6574\uFF0C\u6216\u8005\u670D\u52A1\u5668\u4E0D\u63A5\u53D7\u6B64\u7AEF\u53E3\uFF08\u7AEF\u53E3\u88AB\u5360\u7528\u6216\u8005\u4E0D\u5728\u8303\u56F4\u5185\uFF09"})}return(n,l)=>{const c=G("router-link");return s(),a(m,null,[t("div",null,[A,L,R,r(t("p",null," \u60A8\u5F53\u524D\u7684\u53EF\u62B5\u7528\u6D41\u91CF: "+i(k.value.free_traffic)+" GB ",513),[[p,k.value.free_traffic]]),(s(!0),a(m,null,h(b.value,e=>(s(),a("div",$,[T(c,{to:{name:"modules.tunnels.show",params:{id:e.id}},class:"list-group-item list-group-item-action shadow-sm rounded"},{default:C(()=>[t("div",q,[t("h5",I,i(e.name),1),t("small",null,i(new Date(e.updated_at).toLocaleString()),1)]),t("p",J,[e.protocol=="http"||e.protocol=="https"?(s(),a("span",K,[t("a",{rel:"noreferrer",target:"_blank",href:e.protocol+"://"+e.custom_domain,class:"text-decoration-none"},[y(i(e.protocol+"://"+e.custom_domain)+" ",1),W],8,Q)])):(s(),a("span",X,i(e.protocol+"://"+e.server.server_address+":"+e.remote_port),1))])]),_:2},1032,["to"])]))),256))]),t("div",Y,[t("div",Z,[t("button",{type:"button",class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#createTunnelModel",onClick:l[0]||(l[0]=e=>{H(),B()})}," \u521B\u5EFA\u96A7\u9053 "),T(c,{type:"button",class:"btn btn-outline-primary",to:{name:"modules.tunnels.compact"}},{default:C(()=>[O]),_:1},8,["to"]),T(c,{type:"button",class:"btn btn-outline-primary",to:{name:"modules.tunnels.download"}},{default:C(()=>[tt]),_:1},8,["to"])])]),t("div",et,[t("div",ot,[t("div",lt,[at,t("div",st,[S.value?(s(),a("div",nt," \u96A7\u9053\u521B\u5EFA\u6210\u529F\u3002 ")):g.value?(s(),a("div",rt,i(g.value),1)):(s(),a("div",it," \u4E3A\u4E86\u9632\u6B62\u96A7\u9053\u88AB\u6EE5\u7528\uFF0C\u6211\u4EEC\u4F1A\u4E0D\u5B9A\u671F\u68C0\u67E5\u6620\u5C04\u5185\u5BB9\u3002 ")),t("div",dt,[r(t("input",{class:"form-control",id:"floatingName",placeholder:"xxx","onUpdate:modelValue":l[1]||(l[1]=e=>o.value.name=e)},null,512),[[x,o.value.name]]),ut]),t("div",ct,[r(t("input",{class:"form-control",id:"floatingName",placeholder:"xxx","onUpdate:modelValue":l[2]||(l[2]=e=>o.value.local_address=e)},null,512),[[x,o.value.local_address]]),_t]),t("div",vt,[r(t("select",{class:"form-control",id:"floatingProtocol","onUpdate:modelValue":l[3]||(l[3]=e=>o.value.protocol=e)},bt,512),[[f,o.value.protocol]]),gt]),r(t("div",xt,[r(t("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":l[4]||(l[4]=e=>o.value.server_id=e)},[(s(!0),a(m,null,h(w.value,e=>(s(),a("option",{value:e.id},i(e.name),9,yt))),256))],512),[[f,o.value.server_id]]),kt],512),[[p,o.value.protocol=="http"]]),r(t("div",St,[r(t("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":l[5]||(l[5]=e=>o.value.server_id=e)},[(s(!0),a(m,null,h(V.value,e=>(s(),a("option",{value:e.id},i(e.name),9,Tt))),256))],512),[[f,o.value.server_id]]),Ct],512),[[p,o.value.protocol=="https"]]),r(t("div",Pt,[r(t("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":l[6]||(l[6]=e=>o.value.server_id=e),onChange:D},[(s(!0),a(m,null,h(U.value,e=>(s(),a("option",{value:e.id},i(e.name),9,wt))),256))],544),[[f,o.value.server_id]]),Vt],512),[[p,o.value.protocol=="tcp"]]),r(t("div",Ut,[r(t("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":l[7]||(l[7]=e=>o.value.server_id=e),onChange:D},[(s(!0),a(m,null,h(M.value,e=>(s(),a("option",{value:e.id},i(e.name),9,Mt))),256))],544),[[f,o.value.server_id]]),Nt],512),[[p,o.value.protocol=="udp"]]),r(t("div",null,[t("div",Dt,[r(t("input",{class:"form-control",id:"floatingDomain",placeholder:"xxx","onUpdate:modelValue":l[8]||(l[8]=e=>o.value.custom_domain=e)},null,512),[[x,o.value.custom_domain]]),jt]),t("div",Ht,[r(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":l[9]||(l[9]=e=>o.value.create_https=e),id:"createHttps"},null,512),[[F,o.value.create_https]]),Bt])],512),[[p,o.value.protocol=="http"||o.value.protocol=="https"]]),r(t("div",zt,[r(t("input",{class:"form-control",id:"floatingPort",placeholder:"xxx","onUpdate:modelValue":l[10]||(l[10]=e=>o.value.remote_port=e)},null,512),[[x,o.value.remote_port]]),Et,d.value?(s(),a("div",Ft,[o.value.remote_port<d.value.min_port||o.value.remote_port>d.value.max_port?(s(),a("div",Gt," \u5F53\u524D\u7AEF\u53E3\u8303\u56F4\u4E0D\u6B63\u786E\u3002 ")):P("",!0)])):P("",!0)],512),[[p,o.value.protocol=="tcp"||o.value.protocol=="udp"]]),t("span",At,[t("span",{textContent:i(z(o.value.server_id))},null,8,Lt)]),d.value?(s(),a("div",Rt,[$t,t("p",null,"\u540D\u79F0: "+i(d.value.name),1),t("p",null," \u7AEF\u53E3\u8303\u56F4: "+i(d.value.min_port)+" - "+i(d.value.max_port),1),t("p",null," \u96A7\u9053\u6570\u91CF: "+i(d.value.tunnels)+"/"+i(d.value.max_tunnels),1),d.value.price_per_gb!==0?(s(),a("p",qt," \u6B64\u8282\u70B9\u4E3A\u6536\u8D39\u8282\u70B9, \u6BCF GB \u6D41\u91CF\u6D88\u8017\u7684 Drops: "+i(d.value.price_per_gb),1)):(s(),a("p",It,"\u6B64\u8282\u70B9\u76EE\u524D\u4E0D\u6536\u53D6\u8D39\u7528"))])):P("",!0),Jt]),t("div",{class:"modal-footer"},[Kt,t("button",{type:"button",class:"btn btn-primary",onClick:E}," \u521B\u5EFA ")])])])])],64)}}};export{Xt as default};
