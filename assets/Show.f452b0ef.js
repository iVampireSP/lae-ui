import{r as i,a as y,c as o,b as e,t as h,l as a,u as p,F as b,d as C,i as c,e as n,by as U}from"./index.8172a0e3.js";import{V as _,g as B,l as S}from"./github.9e0d0c4a.js";import{_ as k}from"./WorkOrderStatus.097e65b7.js";const O=["textContent"],D={class:"markdown-preview"},E={class:"mt-3"},F=e("h4",null,"\u5BF9\u8BDD\u8BB0\u5F55",-1),I={class:"card border-light mb-3 markdown-preview shadow"},L={class:"card-header"},N={key:0,class:"text-primary"},W={key:1},j={class:"text-end"},H={class:"card-body"},M={class:"mt-5"},R=e("h4",null,"\u56DE\u590D",-1),T={class:"mt-2"},G={__name:"Show",setup($){const l=U(),w=i(!1);_.use(B,{Hljs:S});const s=i({title:"\u5DE5\u5355",content:"### Content"}),v=i([]),m=i({content:""});function r(){c.get("/work-orders/"+l.params.id).then(d=>{s.value=d.data,w.value=!0}),c.get("/work-orders/"+l.params.id+"/replies").then(d=>{v.value=d.data})}r();const V=setInterval(r,1e4);y(()=>{clearInterval(V)});function f(){c.post("/work-orders/"+l.params.id+"/replies",m.value).then(()=>{r()})}function g(){c.patch("/work-orders/"+l.params.id,{status:"closed"}).then(()=>{r()})}return(d,u)=>(n(),o(b,null,[e("div",null,[e("h3",{textContent:h(s.value.title)},null,8,O),e("div",D,[a(p(_),{modelValue:s.value.content,"onUpdate:modelValue":u[0]||(u[0]=t=>s.value.content=t),mode:"preview"},null,8,["modelValue"])])]),a(k,{status:s.value.status},null,8,["status"]),e("div",E,[F,(n(!0),o(b,null,C(v.value,t=>(n(),o("div",I,[e("div",L,[t.user_id==null?(n(),o("span",N," \u63D0\u4F9B\u65B9 ")):(n(),o("span",W," \u60A8 ")),e("span",j,h(new Date(t.created_at).toLocaleString()),1)]),e("div",H,[a(p(_),{modelValue:t.content,"onUpdate:modelValue":x=>t.content=x,mode:"preview"},null,8,["modelValue","onUpdate:modelValue"])])]))),256))]),e("div",M,[R,a(p(_),{modelValue:m.value.content,"onUpdate:modelValue":u[1]||(u[1]=t=>m.value.content=t),height:"500px",placeholder:"\u7EE7\u7EED\u8DDF\u8FDB\u95EE\u9898\u3002\u5982\u679C\u95EE\u9898\u5DF2\u89E3\u51B3\uFF0C\u8BF7\u5173\u95ED\u5DE5\u5355\u3002"},null,8,["modelValue"]),e("div",{class:"btn-group mt-4",role:"group","aria-label":"Basic example"},[e("button",{class:"btn btn-outline-primary",onClick:f},"\u56DE\u590D"),e("button",{class:"btn btn-danger",onClick:g},"\u5173\u95ED")])]),e("div",T,[a(k,{status:s.value.status},null,8,["status"])])],64))}};export{G as default};
