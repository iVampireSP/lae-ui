import{r as u,i as g,c,b as t,w as i,q as r,bs as x,F as f,d as C,t as l,bp as w,v as $,j as a,h as T,e as _}from"./index.8172a0e3.js";const F=t("p",null,"\u9996\u5148\uFF0C\u8BF7\u5728\u8FD9\u91CC\u7ED9\u60A8\u7684\u670D\u52A1\u5668\u8D77\u4E00\u4E2A\u540D\u5B57\u3002",-1),G=t("h4",{class:"mt-5"},"\u4E4B\u540E\uFF0C\u60A8\u60F3\u5C06\u670D\u52A1\u5668\u521B\u5EFA\u5728\u54EA\u91CC\uFF1F",-1),L=["value"],N=a("\u6B64\u8282\u70B9\u57FA\u7840\u4EF7\u683C "),P=["textContent"],j=a(" Drops"),A={class:"mt-3"},q=t("h4",{class:"mt-5"},"\u60A8\u60F3\u8981\u591A\u5C11\u4E2A CPU \u6838\u5FC3\uFF1F",-1),z=a(" \u5C06\u4F7F\u7528 "),H=["textContent"],J=a(" \u4E2A\u6838\u5FC3\u3002\u4EF7\u683C\u4E3A "),K=["textContent"],Q=a(" Drops "),R={class:"mt-3"},W=t("h4",{class:"mt-5"},"\u60A8\u60F3\u8981\u591A\u5927\u5185\u5B58\uFF1F",-1),X=a(" \u5C06\u4F7F\u7528 "),Y=["textContent"],Z=a(" GB \u5185\u5B58\u3002\u4EF7\u683C\u4E3A "),I=["textContent"],O=a(" Drops "),tt={class:"mt-3"},et=t("h4",{class:"mt-5"},"\u60A8\u9700\u8981\u591A\u5927\u7684\u78C1\u76D8\uFF1F",-1),st=a(" \u5C06\u4F7F\u7528 "),ot=["textContent"],nt=a(" GB \u78C1\u76D8\u3002\u4EF7\u683C\u4E3A "),at=["textContent"],lt=a(" Drops "),it={class:"mt-3"},dt=t("h4",{class:"mt-5"},"\u9700\u8981\u5907\u4EFD\u5417\uFF1F",-1),ut=a(" \u5C06\u53EF\u4EE5\u521B\u5EFA "),ct=["textContent"],_t=a(" \u4E2A\u5907\u4EFD\u3002\u4EF7\u683C\u4E3A "),rt=["textContent"],vt=a(" Drops "),mt={class:"mt-3"},pt=t("h4",{class:"mt-5"},"\u60A8\u9700\u8981\u591A\u5C11\u7AEF\u53E3\uFF1F",-1),ht=a(" \u5C06\u5206\u914D "),gt=["textContent"],xt=a(" \u4E2A\u7AEF\u53E3\u3002\u4EF7\u683C\u4E3A "),ft=["textContent"],Ct=a(" Drops "),bt={class:"mt-3"},kt=t("h4",{class:"mt-5"},"\u60A8\u9700\u8981\u6570\u636E\u5E93\u5417\uFF1F",-1),yt={class:"form-check"},Vt={class:"form-check-label",for:"c-databases"},Ut=a(" \u662F\u7684\uFF0C\u6211\u7528\u7684\u5230\u6570\u636E\u5E93\uFF0C\u6211\u60F3\u8981\u4E00\u4E2A\u3002"),Dt=a("(\u9700\u8981 "),Et=["textContent"],Bt=a(" Drops)"),Mt={class:"mt-4"},St=t("h4",null,"\u60A8\u60F3\u8981\u5F00\u4EC0\u4E48\u670D\u52A1\u5668\uFF1F",-1),wt={class:"row"},$t={class:"col"},Tt=["value"],Ft={class:"col"},Gt=["value"],Lt=["textContent"],Nt=["textContent"],Pt={class:"mt-3"},jt=["disabled"],zt={__name:"Create",setup(At){const e=u({name:"",cpu_limit:100,memory:1024,disk:1024,databases:!1,allocations:1,backups:1}),m=u({}),p=u({}),h=u({}),v=u(0),b=u({}),k=u({}),d=u({});function y(){p.value.forEach(n=>{n.id==v.value&&(k.value=n,h.value=n.eggs,e.value.egg_id=n.eggs[0].egg_id,V())})}function V(){h.value.forEach(n=>{n.egg_id==e.value.egg_id&&(b.value=n)})}g.get("/modules/gct/locations").then(n=>{m.value=n.data,e.value.location_id=n.data[0].id,d.value=n.data[0]}),g.get("/modules/gct/nests").then(n=>{p.value=n.data,v.value=n.data[0].id,y()});const U=u(!1);function B(){let n=e.value;if(n.name==""){alert("\u8BF7\u8F93\u5165\u670D\u52A1\u5668\u540D\u79F0");return}e.value.databases?n.databases=1:n.databases=0,U.value=!0,g.post("/modules/gct/hosts",n).then(o=>{T.push({name:"tasks"})})}function M(){m.value.forEach(n=>{n.id==e.value.location_id&&(d.value=n)})}function S(n){n=n||32;for(var o="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",s=o.length,D="",E=0;E<n;E++)D+=o.charAt(Math.floor(Math.random()*s));return D}return e.value.name=S(8),(n,o)=>(_(),c("div",null,[F,t("h3",null,[i(t("input",{class:"editable","onUpdate:modelValue":o[0]||(o[0]=s=>e.value.name=s),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,512),[[r,e.value.name]])]),G,i(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[1]||(o[1]=s=>e.value.location_id=s),onChange:o[2]||(o[2]=s=>M())},[(_(!0),c(f,null,C(m.value,s=>(_(),c("option",{value:s.id},l(s.name)+" - (\u670D\u52A1\u5668\u6570\u91CF: "+l(s.servers)+") ",9,L))),256))],544),[[x,e.value.location_id]]),t("p",null,[N,t("span",{textContent:l(d.value.price*100)},null,8,P),j]),t("div",A,[q,i(t("input",{type:"range",class:"form-range",min:"100",max:"800",step:"100","onUpdate:modelValue":o[3]||(o[3]=s=>e.value.cpu_limit=s)},null,512),[[r,e.value.cpu_limit]]),z,t("span",{textContent:l(e.value.cpu_limit/100)},null,8,H),J,t("span",{textContent:l(e.value.cpu_limit/100*d.value.cpu_price)},null,8,K),Q]),t("div",R,[W,i(t("input",{type:"range",class:"form-range",min:"1024",max:"10240",step:"512","onUpdate:modelValue":o[4]||(o[4]=s=>e.value.memory=s)},null,512),[[r,e.value.memory]]),X,t("span",{textContent:l(e.value.memory/1024)},null,8,Y),Z,t("span",{textContent:l(e.value.memory/1024*d.value.memory_price*100)},null,8,I),O]),t("div",tt,[et,i(t("input",{type:"range",class:"form-range",min:"512",max:"40960",step:"512","onUpdate:modelValue":o[5]||(o[5]=s=>e.value.disk=s)},null,512),[[r,e.value.disk]]),st,t("span",{textContent:l(e.value.disk/1024)},null,8,ot),nt,t("span",{textContent:l(e.value.disk/1024*d.value.disk_price*100)},null,8,at),lt]),t("div",it,[dt,i(t("input",{type:"range",class:"form-range",min:"1",max:"20","onUpdate:modelValue":o[6]||(o[6]=s=>e.value.backups=s)},null,512),[[r,e.value.backups]]),ut,t("span",{textContent:l(e.value.backups)},null,8,ct),_t,t("span",{textContent:l(e.value.backups*d.value.backup_price*100)},null,8,rt),vt]),t("div",mt,[pt,i(t("input",{type:"range",class:"form-range",min:"1",max:"5","onUpdate:modelValue":o[7]||(o[7]=s=>e.value.allocations=s)},null,512),[[r,e.value.allocations]]),ht,t("span",{textContent:l(e.value.allocations)},null,8,gt),xt,t("span",{textContent:l(e.value.allocations*d.value.allocation_price*100)},null,8,ft),Ct]),t("div",bt,[kt,t("div",yt,[i(t("input",{class:"form-check-input",type:"checkbox",value:"1",id:"c-databases","onUpdate:modelValue":o[8]||(o[8]=s=>e.value.databases=s)},null,512),[[w,e.value.databases]]),t("label",Vt,[Ut,t("span",null,[Dt,t("span",{textContent:l(d.value.database_price*100)},null,8,Et),Bt])])])]),t("div",Mt,[St,t("div",wt,[t("div",$t,[i(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[9]||(o[9]=s=>v.value=s),onChange:o[10]||(o[10]=s=>y())},[(_(!0),c(f,null,C(p.value,s=>(_(),c("option",{value:s.id},l(s.name),9,Tt))),256))],544),[[x,v.value]])]),i(t("div",Ft,[i(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[11]||(o[11]=s=>e.value.egg_id=s),onChange:o[12]||(o[12]=s=>V())},[(_(!0),c(f,null,C(h.value,s=>(_(),c("option",{value:s.egg_id},l(s.name),9,Gt))),256))],544),[[x,e.value.egg_id]])],512),[[$,v.value]])]),t("p",{textContent:l(k.value.description)},null,8,Lt),t("p",{textContent:l(b.value.description)},null,8,Nt)]),t("div",Pt,[t("button",{disabled:U.value,class:"btn btn-outline-primary",onClick:o[13]||(o[13]=s=>B())}," \u521B\u5EFA\u670D\u52A1\u5668 ",8,jt)])]))}};export{zt as default};
