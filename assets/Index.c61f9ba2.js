import{r as i,i as u,c as s,b as t,F as h,d as b,f as _,w as v,q as g,l as y,m as f,n as w,e as a,u as k,h as x,t as n,j as C}from"./index.8172a0e3.js";const P=t("h3",null,"\u6E38\u620F\u5BB9\u5668",-1),V={class:"overflow-auto"},D={class:"table table-hover"},M=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"ID"),t("th",{scope:"col"},"\u540D\u79F0"),t("th",{scope:"col"},"IP:\u7AEF\u53E3"),t("th",{scope:"col"},"\u6A21\u677F"),t("th",{scope:"col"},"\u72B6\u6001"),t("th",{scope:"col"},"\u521B\u5EFA\u65F6\u95F4")])],-1),N=["onClick"],B={key:0},I={key:0,class:"text-success"},E={key:1,class:"text-danger"},F={key:2,class:"text-warning"},L={key:3},S={class:"modal fade",id:"updatePasswordModel",tabindex:"-1","aria-labelledby":"updatePasswordModel","aria-hidden":"true"},T={class:"modal-dialog"},$={class:"modal-content"},j=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"\u4FEE\u6539\u5BC6\u7801"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),q={class:"modal-body"},U={key:0,class:"alert alert-success",role:"alert"},z={key:1,class:"alert alert-danger",role:"alert"},A={key:2,class:"alert alert-danger",role:"alert"},G={key:3,class:"alert alert-primary",role:"alert"},H={class:"form-floating mb-3"},J=t("label",{for:"floatingPassword"},"\u65B0\u5BC6\u7801",-1),K={class:"modal-footer"},O=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1),Q={class:"btn-group",role:"group"},R=C("\u521B\u5EFA\u670D\u52A1\u5668"),W=t("a",{type:"button",class:"btn btn-outline-primary",target:"_blank",href:"https://panel.muhanyun.cn"},"\u524D\u5F80\u63A7\u5236\u9762\u677F",-1),X=t("button",{type:"button",class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#updatePasswordModel"}," \u4FEE\u6539\u9762\u677F\u5BC6\u7801 ",-1),Y=t("div",{class:"mt-3"},[t("p",null,"\u5982\u679C\u60A8\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\uFF0C\u8BF7\u5728\u521B\u5EFA\u597D\u670D\u52A1\u5668\u540E\u524D\u5F80\u90AE\u7BB1\u4E2D\u67E5\u770B\u8D26\u53F7\u6216\u5BC6\u7801\u3002")],-1),st={__name:"Index",setup(Z){const d=i({}),l=i(""),r=i("");function m(){if(r.value.length<8){l.value="wrong";return}u.patch("/modules/gct/account",{password:r.value}).then(()=>{l.value="success"}).catch(()=>{l.value="error"})}return u.get("/modules/gct/hosts").then(p=>{d.value=p.data,d.value.forEach(o=>{u.get("/modules/gct/hosts/"+o.host_id+"/server/resources").then(c=>{o.stats=c.data})})}),(p,o)=>{const c=w("router-link");return a(),s(h,null,[t("div",null,[P,t("div",V,[t("table",D,[M,t("tbody",null,[(a(!0),s(h,null,b(d.value,e=>(a(),s("tr",{onClick:tt=>k(x).push({name:"modules.gct.show",params:{id:e.host_id}}),class:"cursor-pointer"},[t("td",null,n(e.host_id),1),t("td",null,n(e.name),1),t("td",null,n(e.ip+":"+e.port),1),t("td",null,n(e.egg.name),1),t("td",null,[e.stats?(a(),s("span",B,[e.stats.attributes.current_state==="running"?(a(),s("span",I," \u8FD0\u884C\u4E2D ")):e.stats.attributes.current_state==="offline"?(a(),s("span",E," \u5173\u673A ")):e.stats.attributes.current_state==="starting"?(a(),s("span",F," \u542F\u52A8\u4E2D ")):(a(),s("span",L," ... "))])):_("",!0)]),t("td",null,n(new Date(e.created_at).toLocaleString()),1)],8,N))),256))])])])]),t("div",S,[t("div",T,[t("div",$,[j,t("div",q,[l.value=="success"?(a(),s("div",U," \u5BC6\u7801\u4FEE\u6539\u6210\u529F\u3002 ")):_("",!0),l.value=="error"?(a(),s("div",z," \u65E0\u6CD5\u4FEE\u6539\u5BC6\u7801\u3002\u53EF\u80FD\u662F\u6CA1\u6709\u521B\u5EFA\u8FC7\u670D\u52A1\u5668\u3002 ")):_("",!0),l.value=="wrong"?(a(),s("div",A," \u5BC6\u7801\u957F\u5EA6\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 8 \u4F4D\u3002 ")):(a(),s("div",G," \u6211\u4EEC\u5C06\u4FEE\u6539\u5BF9\u5E94\u60A8\u90AE\u7BB1\u8D26\u6237\u7684\u9762\u677F\u5BC6\u7801\u3002 ")),t("div",H,[v(t("input",{class:"form-control",id:"floatingPassword",placeholder:"\u65B0\u7684\u5BC6\u7801","onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e),min:"8",type:"password"},null,512),[[g,r.value]]),J])]),t("div",K,[O,t("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=e=>m())}," \u4FEE\u6539 ")])])])]),t("div",null,[t("div",Q,[y(c,{type:"button",class:"btn btn-outline-primary",to:{name:"modules.gct.create"}},{default:f(()=>[R]),_:1},8,["to"]),W,X])]),Y],64)}}};export{st as default};
