import{r as u,s as f,o as x,a as y,c as n,b as s,F as D,d as w,i as r,e as a,t as c,j as l,f as _,w as h,v as g}from"./index.8172a0e3.js";const C=s("h3",null,"\u8BA1\u8D39\u9879\u76EE\u5217\u8868",-1),F=s("p",null," \u6CE8\u610F: \u90E8\u5206\u670D\u52A1\u4F1A\u63A5\u7BA1\u4EF7\u683C\u3002\u4EF7\u683C\u88AB\u63A5\u7BA1\u540E\uFF0C\u6211\u4EEC\u5C06\u4E0D\u4F1A\u81EA\u52A8\u6263\u8D39\uFF0C\u6263\u8D39\u63A7\u5236\u6743\u5C06\u4EA4\u7ED9\u5BF9\u5E94\u670D\u52A1\u3002 ",-1),B=s("p",null,"\u5982\u679C\u4EF7\u683C\u88AB\u63A5\u7BA1\uFF0C\u5219\u53EF\u80FD\u662F\u6309\u91CF\u8BA1\u8D39\u7B49\u3002",-1),H={class:"overflow-auto"},N={class:"table"},S=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"\u670D\u52A1"),s("th",{scope:"col"},"\u540D\u79F0"),s("th",{scope:"col"},"Drops / 5 Min"),s("th",{scope:"col"},"\u672C\u6708\u6D88\u8017"),s("th",{scope:"col"},"\u72B6\u6001"),s("th",{scope:"col"},"\u521B\u5EFA\u65F6\u95F4"),s("th",{scope:"col"},"\u91CA\u653E")])],-1),V={key:0,class:"text-success"},I=s("br",null,null,-1),L={key:1,class:"text-success"},M={key:2,class:"text-danger"},$={key:0},j={key:1},E=s("br",null,null,-1),R={key:2},T={key:0},U=s("span",{class:"text-success"},[s("i",{class:"bi bi-check-circle"}),l(" \xA0\u8FD0\u884C\u4E2D")],-1),q=[U],z={key:1},A=s("span",{class:"text-warning"},[s("i",{class:"bi bi-clock-history"}),l(" \xA0\u7B49\u5F85\u4E2D")],-1),G=[A],J={key:2},K=s("span",{class:"text-danger"},[s("i",{class:"bi bi-x-circle"}),l(" \xA0\u5DF2\u6682\u505C ")],-1),O=[K],P={key:3},Q=s("span",{class:"text-danger"},[s("i",{class:"bi bi-x-circle"}),l(" \xA0\u5DF2\u505C\u6B62 ")],-1),W=[Q],X=["onClick"],Y=["onClick"],Z=s("p",null,"\u5F53\u60A8\u91CA\u653E\u8D44\u6E90\u540E\uFF0C\u6211\u4EEC\u5C06\u4F1A\u5728\u540E\u53F0\u6392\u961F\u5904\u7406\uFF0C\u8FD9\u53EF\u80FD\u9700\u8981\u4E00\u4E9B\u65F6\u95F4\u3002",-1),ss=s("p",null,"\u8BF7\u6CE8\u610F: Drops \u8BA1\u7B97\u5E76\u4E0D\u51C6\u786E\u3002\u5B83\u53EF\u80FD\u4E0E\u5B9E\u9645\u83B7\u5F97\u6709\u70B9\u504F\u5DEE\u3002",-1),ns={__name:"Hosts",setup(es){const v=u(f.state.user.drops_rate),p=u([]),o=u([]);function i(){r.get("/hosts").then(t=>{p.value=t.data}).catch(t=>{console.log(t)}),r.get("/hosts/usages").then(t=>{o.value=t.data}).catch(t=>{console.log(t)})}function k(t){confirm("\u91CA\u653E\u540E\uFF0C\u60A8\u5C06\u65E0\u6CD5\u518D\u6B21\u4F7F\u7528\u6B64\u8D44\u6E90\uFF0C\u5B83\u7684\u6570\u636E\u5C06\u4F1A\u88AB\u5F7B\u5E95\u5220\u9664\u5E76\u4E14\u65E0\u6CD5\u627E\u56DE\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F")&&r.delete("/hosts/"+t).then(d=>{i()})}function m(t){r.patch("/hosts/"+t,{status:"running"}).then(d=>{d.status==400?alert(d.data.message):i()}).catch(()=>{alert("\u65E0\u6CD5\u89E3\u9664\u6682\u505C\u3002\u53EF\u80FD\u662F\u60A8\u7684\u4F59\u989D\u4E0D\u8DB3\u3002")})}return x(()=>{i();const t=setInterval(i,5e3);y(()=>{clearInterval(t)})}),(t,d)=>(a(),n("div",null,[C,F,B,s("div",H,[s("table",N,[S,s("tbody",null,[(a(!0),n(D,null,w(p.value,e=>(a(),n("tr",null,[s("td",null,c(e.module.name),1),s("td",null,c(e.name),1),s("td",null,[e.managed_price>0?(a(),n("span",V,[l(c(e.managed_price)+" \u5143 / \u6708 ",1),I])):_("",!0),e.price>0?(a(),n("span",L,c(e.price)+" Drops \u2248 "+c((e.price/v.value*8640).toFixed(2))+" \u5143 / \u6708 ",1)):_("",!0),e.price==0&&e.managed_price==0?(a(),n("span",M," \u88AB\u63A5\u7BA1 ")):_("",!0)]),s("td",null,[o.value.drops[e.id]?(a(),n("span",$,c(o.value.drops[e.id].toFixed(4)+" Drops"),1)):(a(),n("span",j," 0 Drops ")),E,o.value.balances[e.id]?(a(),n("span",R,c(o.value.balances[e.id]+" \u5143"),1)):_("",!0)]),s("td",null,[e.status=="running"?(a(),n("span",T,q)):e.status=="pending"?(a(),n("span",z,G)):e.status=="suspended"?(a(),n("span",J,O)):(a(),n("span",P,W))]),s("td",null,c(new Date(e.created_at).toLocaleString()),1),s("td",null,[s("a",{href:"#",onClick:b=>k(e.id)},"\u91CA\u653E",8,X),h(s("span",null,"\xA0",512),[[g,e.status=="suspended"||e.status=="stopped"]]),h(s("a",{href:"#",onClick:b=>m(e.id)},"\u542F\u52A8",8,Y),[[g,e.status=="suspended"||e.status=="stopped"]])])]))),256))])])]),Z,ss]))}};export{ns as default};
